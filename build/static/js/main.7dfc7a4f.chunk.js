(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{23:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(17),r=n.n(c),a=(n(23),n(18)),o=n(8),u=n(3),i=n(2),d=n(0),l=function(e){var t=e.inputHandler,n=e.numberHandler,c=e.submitHandler;return Object(d.jsxs)("form",{children:[Object(d.jsx)("h2",{children:"Add a new contact"}),Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{type:"text",onChange:t})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{type:"text",onChange:n})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",onClick:c,children:"add"})})]})},s=function(e){var t=e.filterHandler;return Object(d.jsxs)("div",{children:["filter shown with: ",Object(d.jsx)("input",{type:"text",onChange:t})]})},j=function(e){var t=e.list,n=e.buttonHandler;return t.map((function(e){return Object(d.jsxs)("div",{children:[e.name,": ",e.number," ",Object(d.jsx)("button",{onClick:function(){return n(e.id)},children:"delete"})]},e.name)}))},b={color:"green"},f={color:"purple"},h={color:"red"},p=function(e){var t=e.message;if(!t)return null;return Object(d.jsx)("div",{children:Object(d.jsx)("div",{className:"notification",style:function(){var e=t.split(" ")[0];return"Added"===e||"Updated"===e?b:"Deleted"===e?f:"Error"===e?h:void 0}(),children:t})})},O=n(5),m=n.n(O),x="/api/persons",v={getAll:function(){return m.a.get(x)},create:function(e){return m.a.post(x,e)},update:function(e,t){return m.a.put("".concat(x,"/").concat(e),t)},erase:function(e){return m.a.delete("".concat(x,"/").concat(e))}},g=function(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(i.useState)(""),b=Object(u.a)(r,2),f=b[0],h=b[1],O=Object(i.useState)(""),m=Object(u.a)(O,2),x=m[0],g=m[1],w=Object(i.useState)(""),H=Object(u.a)(w,2),k=H[0],y=H[1],C=Object(i.useState)(null),E=Object(u.a)(C,2),A=E[0],S=E[1],N=function(e){S(e),setTimeout((function(){return S(null)}),3e3)},D=n.filter((function(e){return!!e.name.toLowerCase().includes(k.toLowerCase())}));return Object(i.useEffect)((function(){v.getAll().then((function(e){return c(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Phonebook"}),Object(d.jsx)(p,{message:A}),Object(d.jsx)(s,{filterHandler:function(e){y(e.target.value)}}),Object(d.jsx)(l,{inputHandler:function(e){h(e.target.value)},numberHandler:function(e){g(e.target.value)},submitHandler:function(e){if(e.preventDefault(),n.find((function(e){return e.name===f}))){var t="".concat(f," is already added to phonebook, replace the old number with a new one?");if(window.confirm(t)){var r=-1,u={name:"None",number:"None"},i=n.map((function(e){return e.name===f?(r=e.id,u=Object(o.a)(Object(o.a)({},e),{},{number:x})):e}));v.update(r,u).then((function(e){c(i),N("Updated ".concat(u.name))})).catch((function(e){N("Error ".concat(e.response.data))}))}}else v.create({name:f,number:x}).then((function(e){c([].concat(Object(a.a)(n),[e.data])),N("Added ".concat(e.data.name))})).catch((function(e){N("Error : ".concat(e.response.data.error))}))}}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(j,{list:D,buttonHandler:function(e){var t=n.find((function(t){return t.id===e})).name,r="Haluatko poistaa numeron ".concat(t);window.confirm(r)&&v.erase(e).then((function(r){c(n.filter((function(t){return t.id!==e}))),N("Deleted ".concat(t))})).catch((function(e){return N("Error happened: ".concat(e))}))}})]})};r.a.render(Object(d.jsx)(g,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.7dfc7a4f.chunk.js.map