(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{23:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var c=t(17),r=t.n(c),a=(t(23),t(18)),o=t(8),u=t(3),i=t(2),d=t(0),l=function(e){var n=e.inputHandler,t=e.numberHandler,c=e.submitHandler;return Object(d.jsxs)("form",{children:[Object(d.jsx)("h2",{children:"Add a new contact"}),Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{type:"text",onChange:n})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{type:"text",onChange:t})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",onClick:c,children:"add"})})]})},s=function(e){var n=e.filterHandler;return Object(d.jsxs)("div",{children:["filter shown with: ",Object(d.jsx)("input",{type:"text",onChange:n})]})},j=function(e){var n=e.list,t=e.buttonHandler;return n.map((function(e){return Object(d.jsxs)("div",{children:[e.name,": ",e.number," ",Object(d.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},e.name)}))},b={color:"green"},f={color:"purple"},h={color:"red"},m=function(e){var n=e.message;if(!n)return null;return Object(d.jsx)("div",{children:Object(d.jsx)("div",{className:"notification",style:function(){var e=n.split(" ")[0];return"Added"===e||"Updated"===e?b:"Deleted"===e?f:"Error"===e?h:void 0}(),children:n})})},p=t(5),O=t.n(p),v="/api/persons",x={getAll:function(){return O.a.get(v)},create:function(e){return O.a.post(v,e)},update:function(e,n){return O.a.put("".concat(v,"/").concat(e),n)},erase:function(e){return O.a.delete("".concat(v,"/").concat(e))}},g=function(){var e=Object(i.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],r=Object(i.useState)(""),b=Object(u.a)(r,2),f=b[0],h=b[1],p=Object(i.useState)(""),O=Object(u.a)(p,2),v=O[0],g=O[1],w=Object(i.useState)(""),H=Object(u.a)(w,2),y=H[0],k=H[1],C=Object(i.useState)(null),E=Object(u.a)(C,2),A=E[0],S=E[1],N=function(){return setTimeout((function(){return S(null)}),3e3)},D=t.filter((function(e){return!!e.name.toLowerCase().includes(y.toLowerCase())}));return Object(i.useEffect)((function(){x.getAll().then((function(e){return c(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Phonebook"}),Object(d.jsx)(m,{message:A}),Object(d.jsx)(s,{filterHandler:function(e){k(e.target.value)}}),Object(d.jsx)(l,{inputHandler:function(e){h(e.target.value)},numberHandler:function(e){g(e.target.value)},submitHandler:function(e){if(e.preventDefault(),t.find((function(e){return e.name===f}))){var n="".concat(f," is already added to phonebook, replace the old number with a new one?");if(window.confirm(n)){var r=-1,u={name:"None",number:"None"},i=t.map((function(e){return e.name===f?(r=e.id,u=Object(o.a)(Object(o.a)({},e),{},{number:v})):e}));x.update(r,u).then((function(e){c(i),S("Updated ".concat(u.name)),N()})).catch((function(e){S("Error happened: Information of ".concat(u.name," has already been removed from the server")),N()}))}}else{var d={name:f,number:v};x.create(d).then((function(e){c([].concat(Object(a.a)(t),[d])),S("Added ".concat(d.name)),N()})).catch((function(e){S("Error happened: ".concat(e)),N()}))}}}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(j,{list:D,buttonHandler:function(e){var n=t.find((function(n){return n.id===e})).name,r="Haluatko poistaa numeron ".concat(n);window.confirm(r)&&x.erase(e).then((function(r){c(t.filter((function(n){return n.id!==e}))),S("Deleted ".concat(n)),N()})).catch((function(e){S("Error happened: ".concat(e)),N()}))}})]})};r.a.render(Object(d.jsx)(g,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.da5c3a04.chunk.js.map