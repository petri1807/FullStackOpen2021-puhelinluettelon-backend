(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{23:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(17),r=n.n(c),a=(n(23),n(18)),o=n(8),u=n(3),i=n(2),d=n(0),l=function(e){var t=e.inputHandler,n=e.numberHandler,c=e.submitHandler;return Object(d.jsxs)("form",{children:[Object(d.jsx)("h2",{children:"Add a new contact"}),Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{type:"text",onChange:t})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{type:"text",onChange:n})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",onClick:c,children:"add"})})]})},s=function(e){var t=e.filterHandler;return Object(d.jsxs)("div",{children:["filter shown with: ",Object(d.jsx)("input",{type:"text",onChange:t})]})},j=function(e){var t=e.list,n=e.buttonHandler;return t.map((function(e){return Object(d.jsxs)("div",{children:[e.name,": ",e.number," ",Object(d.jsx)("button",{onClick:function(){return n(e.id)},children:"delete"})]},e.name)}))},b={color:"green"},f={color:"purple"},h={color:"red"},p=function(e){var t=e.message;if(!t)return null;return Object(d.jsx)("div",{children:Object(d.jsx)("div",{className:"notification",style:function(){var e=t.split(" ")[0];return"Added"===e||"Updated"===e?b:"Deleted"===e?f:"Error"===e?h:void 0}(),children:t})})},m=n(5),O=n.n(m),v="http://localhost:3001/api/persons",x={getAll:function(){return O.a.get(v)},create:function(e){return O.a.post(v,e)},update:function(e,t){return O.a.put("".concat(v,"/").concat(e),t)},erase:function(e){return O.a.delete("".concat(v,"/").concat(e))}},g=function(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(i.useState)(""),b=Object(u.a)(r,2),f=b[0],h=b[1],m=Object(i.useState)(""),O=Object(u.a)(m,2),v=O[0],g=O[1],w=Object(i.useState)(""),H=Object(u.a)(w,2),y=H[0],k=H[1],C=Object(i.useState)(null),E=Object(u.a)(C,2),A=E[0],S=E[1],N=function(){return setTimeout((function(){return S(null)}),3e3)},D=n.filter((function(e){return!!e.name.toLowerCase().includes(y.toLowerCase())}));return Object(i.useEffect)((function(){x.getAll().then((function(e){return c(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Phonebook"}),Object(d.jsx)(p,{message:A}),Object(d.jsx)(s,{filterHandler:function(e){k(e.target.value)}}),Object(d.jsx)(l,{inputHandler:function(e){h(e.target.value)},numberHandler:function(e){g(e.target.value)},submitHandler:function(e){if(e.preventDefault(),n.find((function(e){return e.name===f}))){var t="".concat(f," is already added to phonebook, replace the old number with a new one?");if(window.confirm(t)){var r=-1,u={name:"None",number:"None"},i=n.map((function(e){return e.name===f?(r=e.id,u=Object(o.a)(Object(o.a)({},e),{},{number:v})):e}));x.update(r,u).then((function(e){c(i),S("Updated ".concat(u.name)),N()})).catch((function(e){S("Error happened: Information of ".concat(u.name," has already been removed from the server")),N()}))}}else{var d={name:f,number:v};x.create(d).then((function(e){c([].concat(Object(a.a)(n),[d])),S("Added ".concat(d.name)),N()})).catch((function(e){S("Error happened: ".concat(e)),N()}))}}}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(j,{list:D,buttonHandler:function(e){var t=n.find((function(t){return t.id===e})).name,r="Haluatko poistaa numeron ".concat(t);window.confirm(r)&&x.erase(e).then((function(r){c(n.filter((function(t){return t.id!==e}))),S("Deleted ".concat(t)),N()})).catch((function(e){S("Error happened: ".concat(e)),N()}))}})]})};r.a.render(Object(d.jsx)(g,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.91b7f25e.chunk.js.map